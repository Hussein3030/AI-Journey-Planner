import {
  GoogleGenerativeAI,
  HarmBlockThreshold,
  HarmCategory,
} from '@google/generative-ai';



const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};


  export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for a Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image URL, geo coordinates, rating, descriptions, and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "Okay, here's a travel plan for a couple on a budget in Las Vegas for 3 days, along with hotel options and a detailed itinerary in JSON format.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40 - $80 per night\",\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/07/32/79/circus-circus-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1363,\n        \"longitude\": -115.1629\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Vegas experience with a circus theme, offering budget-friendly rooms, a large casino, and the Adventuredome theme park. Great for those seeking affordable fun.\",\n         \"amenities\" : [\"Wifi\",\"Pool\",\"Casino\",\"Restaurants\"]\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$50 - $90 per night\",\n      \"hotelImageURL\": \"https://www.vegas.com/media/images/hotels/excalibur/excalibur-exterior.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0988,\n        \"longitude\": -115.1740\n      },\n      \"rating\": 3.8,\n      \"description\": \"A medieval-themed hotel offering affordable accommodation, various dining options, a casino, and a pool area. A fun and budget-friendly choice.\",\n         \"amenities\" : [\"Wifi\",\"Pool\",\"Casino\",\"Restaurants\"]\n    },\n    {\n      \"hotelName\": \"OYO Hotel & Casino Las Vegas\",\n      \"hotelAddress\": \"115 E Tropicana Ave, Las Vegas, NV 89109\",\n      \"price\": \"$35 - $70 per night\",\n       \"hotelImageURL\": \"https://www.oyohotels.com/images/hotels/us/las-vegas/oyo-hotel-casino-las-vegas-ex-hooters-casino-hotel/exterior/thumbnail-200x200.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1025,\n        \"longitude\": -115.1671\n      },\n       \"rating\": 3.2,\n       \"description\":\"Basic budget-friendly option with a casino, pool, and easy access to the Strip. It's a no-frills choice, but affordable.\",\n        \"amenities\" : [\"Wifi\",\"Pool\",\"Casino\",\"Restaurants\"]\n    }\n\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip\",\n      \"bestTimeToVisit\": \"Afternoon and Evening\",\n       \"places\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"A beautiful indoor botanical garden with elaborate displays that change seasonally. Free to enter and perfect for a leisurely stroll. \",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Bellagio_Conservatory_Las_Vegas_December_2022.jpg/640px-Bellagio_Conservatory_Las_Vegas_December_2022.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1742\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.7,\n          \"travelTime\": \"Depends on hotel location, but usually within 15-20 minutes by foot or bus from central strip hotels.\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n           \"placeDetails\":\"A free water show with music and light display, can be watched from the streets.  \",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/Fountains_of_Bellagio_Las_Vegas_Nevada.jpg/800px-Fountains_of_Bellagio_Las_Vegas_Nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1742\n          },\n          \"ticketPricing\":\"Free\",\n          \"rating\": 4.8,\n          \"travelTime\": \"Located in front of the Bellagio,  so no additional travel time is needed.\"\n\n        },\n          {\n            \"placeName\": \"Walk the Las Vegas Strip\",\n            \"placeDetails\": \"Enjoy walking and exploring the different casino hotels, like Caesars Palace, Paris, New York-New York, etc.\",\n            \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/View_of_Las_Vegas_Strip_at_night_%282015%29.jpg/1280px-View_of_Las_Vegas_Strip_at_night_%282015%29.jpg\",\n             \"geoCoordinates\": {\n              \"latitude\": 36.1162,\n              \"longitude\": -115.1731\n            },\n            \"ticketPricing\": \"Free\",\n           \"rating\": 4.5,\n           \"travelTime\": \"Depends on distance, as you can walk the entire length\"\n          }\n\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown and Fremont Street\",\n      \"bestTimeToVisit\": \"Late Afternoon and Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n           \"placeDetails\": \"A pedestrian mall with a massive video screen canopy overhead, featuring free light shows and live music.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/Fremont_Street_Experience%2C_Las_Vegas%2C_Nevada_2017.jpg/1280px-Fremont_Street_Experience%2C_Las_Vegas%2C_Nevada_2017.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1698,\n            \"longitude\": -115.1400\n          },\n           \"ticketPricing\":\"Free\",\n          \"rating\": 4.6,\n          \"travelTime\": \"Approximately 20-30 minutes by bus or rideshare from the Strip.\"\n        },\n        {\n          \"placeName\": \"Downtown Las Vegas Murals\",\n          \"placeDetails\": \"Explore the streets of Downtown and enjoy the vibrant street art and murals.\",\n            \"placeImageURL\": \"https://downtown.vegas/wp-content/uploads/2023/02/12-Downtown_murals_1.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1699,\n            \"longitude\": -115.1403\n          },\n           \"ticketPricing\":\"Free\",\n          \"rating\": 4.3,\n            \"travelTime\": \"Located right within the downtown area, walkable from Fremont Street.\"\n        },\n        {\n           \"placeName\":\"Container Park\",\n           \"placeDetails\":\" A unique outdoor shopping and entertainment area built from repurposed shipping containers, offers a range of shops and restaurants.\",\n           \"placeImageURL\": \"https://images.squarespace-cdn.com/content/v1/581354ff2e69f139751255ed/1542257898450-R467D1I6V5667Z3E526Z/Container+Park+Las+Vegas.jpg?format=1000w\",\n           \"geoCoordinates\":{\n            \"latitude\": 36.1674,\n            \"longitude\": -115.1401\n\n           },\n            \"ticketPricing\":\"Free to enter, costs for shopping and dining\",\n            \"rating\": 4.2,\n            \"travelTime\": \"Walkable distance from Fremont Street\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Relaxation and Exploration\",\n        \"bestTimeToVisit\": \"Morning and Afternoon\",\n      \"places\": [\n        {\n          \"placeName\": \"Pool time at hotel\",\n          \"placeDetails\": \"Take some time to enjoy the hotel swimming pool and soak up some sun.\",\n          \"placeImageURL\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ7R9pS_v8zP8p7c52WJ4Q5tXJq629k4Q1UBA&usqp=CAU\",\n            \"geoCoordinates\": {\n            \"latitude\": \"varies based on hotel\",\n            \"longitude\": \"varies based on hotel\"\n          },\n           \"ticketPricing\":\"Free for hotel guests\",\n          \"rating\": 4.0,\n          \"travelTime\": \"No travel time needed, as it is within your hotel.\"\n        },\n         {\n          \"placeName\": \"Explore the LINQ Promenade\",\n          \"placeDetails\": \"An outdoor entertainment, dining, and retail district.  You can enjoy views of the High Roller Observation Wheel.\",\n           \"placeImageURL\": \"https://www.caesars.com/content/dam/las/Property/LINQ/attraction/the-linq-promenade-new-2021.jpg.adapt.768.high.jpg\",\n            \"geoCoordinates\": {\n            \"latitude\": 36.1169,\n             \"longitude\": -115.1699\n            },\n           \"ticketPricing\":\"Free to walk around, costs for rides and shopping\",\n           \"rating\": 4.3,\n          \"travelTime\": \"Depends on hotel location, usually 10-20 minutes by foot or bus from central strip hotels.\"\n        },\n        {\n          \"placeName\": \"Visit a themed Hotel\",\n          \"placeDetails\": \"You can choose to visit a themed hotel like Paris Las Vegas or New York-New York for a self guided tour and enjoy the ambience.\",\n           \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/8/8d/New_York_New_York_Hotel_and_Casino_2023.jpg\",\n           \"geoCoordinates\":{\n            \"latitude\": \"varies based on hotel\",\n            \"longitude\": \"varies based on hotel\"\n          },\n            \"ticketPricing\":\"Free to enter the hotel, costs for some attractions and dining\",\n            \"rating\": 4.4,\n            \"travelTime\":\"Depends on the hotel you want to visit.\"\n        }\n      ]\n    }\n  }\n}\n```\n**Notes:**\n\n*   **Prices:** Hotel prices are estimates and can vary depending on the time of year and booking site. The 'price' for the itinerary places indicates entry ticket costs.\n*   **Transportation:** Consider using the Las Vegas Monorail, buses, or rideshare for getting around, keeping an eye on your budget. Walking is also a great option for the Strip.\n*   **Food:**  To save money on food, consider eating at less expensive casual diners, food courts, and grocery stores.\n*   **Flexibility:** This itinerary can be adjusted to your interests and energy levels. Don't feel pressured to stick to every item.\n*   **Free Activities:** Take advantage of free attractions such as the Bellagio Conservatory, the Fountains of Bellagio, and walking the Strip.\n\nRemember to book your hotel in advance for better deals. Have a great time in Las Vegas!\n"},
        ],
      },
    ],
  });


